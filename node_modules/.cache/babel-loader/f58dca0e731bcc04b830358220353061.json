{"ast":null,"code":"var _jsxFileName = \"/Users/subhamsaha/Dev-Files/React-Practice/react-rmdb-finished-classes/src/components/Home.js\";\nimport React, { Component } from 'react'; // Config\n\nimport { POSTER_SIZE, BACKDROP_SIZE, IMAGE_BASE_URL } from '../config'; // Components\n\nimport HeroImage from './HeroImage';\nimport Grid from './Grid';\nimport Thumb from './Thumb';\nimport Spinner from './Spinner';\nimport SearchBar from './SearchBar';\nimport Button from './Button'; // Image\n\nimport NoImage from '../images/no_image.jpg'; // API\n\nimport API from '../API';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  page: 0,\n  results: [],\n  total_pages: 0,\n  total_results: 0\n};\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      movies: initialState,\n      searchTerm: '',\n      isLoadingMore: false,\n      loading: false,\n      error: false\n    };\n\n    this.fetchMovies = async (page, searchTerm = '') => {\n      try {\n        this.setState({\n          error: false,\n          loading: true\n        });\n        const movies = await API.fetchMovies(searchTerm, page);\n        this.setState(prev => ({ ...prev,\n          movies: { ...movies,\n            results: page > 1 ? [...prev.movies.results, ...movies.results] : [...movies.results]\n          },\n          loading: false\n        }));\n      } catch (error) {\n        this.setState({\n          error: true,\n          loading: false\n        });\n      }\n    };\n\n    this.handleSearch = searchTerm => this.setState({\n      movies: initialState,\n      searchTerm\n    }, () => this.fetchMovies(1, this.state.searchTerm));\n\n    this.handleLoadMore = () => this.fetchMovies(this.state.movies.page + 1, this.state.searchTerm);\n  }\n\n  componentDidMount() {\n    this.fetchMovies(1);\n  }\n\n  render() {\n    const {\n      searchTerm,\n      movies,\n      loading,\n      error\n    } = this.state;\n    if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Something went wrong ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 23\n    }, this);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [!searchTerm && movies.results[0] ? /*#__PURE__*/_jsxDEV(HeroImage, {\n        image: `${IMAGE_BASE_URL}${BACKDROP_SIZE}${movies.results[0].backdrop_path}`,\n        title: movies.results[0].original_title,\n        text: movies.results[0].overview\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(SearchBar, {\n        setSearchTerm: this.handleSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        header: searchTerm ? 'Search Result' : 'Popular Movies',\n        children: movies.results.map(movie => /*#__PURE__*/_jsxDEV(Thumb, {\n          clickable: true,\n          image: movie.poster_path ? IMAGE_BASE_URL + POSTER_SIZE + movie.poster_path : NoImage,\n          movieId: movie.id\n        }, movie.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this), movies.page < movies.total_pages && !loading && /*#__PURE__*/_jsxDEV(Button, {\n        text: \"Load More\",\n        callback: this.handleLoadMore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/subhamsaha/Dev-Files/React-Practice/react-rmdb-finished-classes/src/components/Home.js"],"names":["React","Component","POSTER_SIZE","BACKDROP_SIZE","IMAGE_BASE_URL","HeroImage","Grid","Thumb","Spinner","SearchBar","Button","NoImage","API","initialState","page","results","total_pages","total_results","Home","state","movies","searchTerm","isLoadingMore","loading","error","fetchMovies","setState","prev","handleSearch","handleLoadMore","componentDidMount","render","backdrop_path","original_title","overview","map","movie","poster_path","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// Config\nimport { POSTER_SIZE, BACKDROP_SIZE, IMAGE_BASE_URL } from '../config';\n// Components\nimport HeroImage from './HeroImage';\nimport Grid from './Grid';\nimport Thumb from './Thumb';\nimport Spinner from './Spinner';\nimport SearchBar from './SearchBar';\nimport Button from './Button';\n// Image\nimport NoImage from '../images/no_image.jpg';\n// API\nimport API from '../API';\n\nconst initialState = {\n  page: 0,\n  results: [],\n  total_pages: 0,\n  total_results: 0\n};\n\nclass Home extends Component {\n  state = {\n    movies: initialState,\n    searchTerm: '',\n    isLoadingMore: false,\n    loading: false,\n    error: false\n  };\n\n  fetchMovies = async (page, searchTerm = '') => {\n    try {\n      this.setState({ error: false, loading: true });\n\n      const movies = await API.fetchMovies(searchTerm, page);\n\n      this.setState(prev => ({\n        ...prev,\n        movies: {\n          ...movies,\n          results:\n            page > 1\n              ? [...prev.movies.results, ...movies.results]\n              : [...movies.results]\n        },\n        loading: false\n      }));\n    } catch (error) {\n      this.setState({ error: true, loading: false });\n    }\n  };\n\n  handleSearch = searchTerm =>\n    this.setState({ movies: initialState, searchTerm }, () =>\n      this.fetchMovies(1, this.state.searchTerm)\n    );\n\n  handleLoadMore = () =>\n    this.fetchMovies(this.state.movies.page + 1, this.state.searchTerm);\n\n  componentDidMount() {\n    this.fetchMovies(1);\n  }\n\n  render() {\n    const { searchTerm, movies, loading, error } = this.state;\n\n    if (error) return <div>Something went wrong ...</div>;\n\n    return (\n      <>\n        {!searchTerm && movies.results[0] ? (\n          <HeroImage\n            image={`${IMAGE_BASE_URL}${BACKDROP_SIZE}${movies.results[0].backdrop_path}`}\n            title={movies.results[0].original_title}\n            text={movies.results[0].overview}\n          />\n        ) : null}\n        <SearchBar setSearchTerm={this.handleSearch} />\n        <Grid header={searchTerm ? 'Search Result' : 'Popular Movies'}>\n          {movies.results.map(movie => (\n            <Thumb\n              key={movie.id}\n              clickable\n              image={\n                movie.poster_path\n                  ? IMAGE_BASE_URL + POSTER_SIZE + movie.poster_path\n                  : NoImage\n              }\n              movieId={movie.id}\n            />\n          ))}\n        </Grid>\n        {loading && <Spinner />}\n        {movies.page < movies.total_pages && !loading && (\n          <Button text='Load More' callback={this.handleLoadMore} />\n        )}\n      </>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}